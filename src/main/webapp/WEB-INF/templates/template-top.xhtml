<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/admin-top.xhtml">

    <ui:define name="head">
        <h:outputStylesheet library="css" name="showcase.css"/>
        <h:outputStylesheet library="css" name="prism.css"/>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css"/>
        <link rel="shortcut icon" type="image/x-icon" href="#{resource['images/favicon.ico']}"/>
        <link rel="shortcut icon" type="image/x-icon" href="#{resource['images/favicon-32x32.png']}" sizes="32x32"/>
        <link rel="shortcut icon" type="image/x-icon" href="#{resource['images/favicon-16x16.png']}" sizes="16x16"/>
        <!-- See https://developers.google.com/web/updates/2014/11/Support-for-theme-color-in-Chrome-39-for-Android -->
        <meta name="theme-color" content="#444"/>
        <meta name="mobile-web-app-capable" content="yes"/>
        <title>AdminFaces Showcase</title>
    </ui:define>

    <ui:define name="logo">
        <b>Admin</b>Faces
    </ui:define>

    <ui:define name="menu">
        <ui:include src="/includes/menubar.xhtml"/>
    </ui:define>

    <ui:define name="top-menu">
        <ui:include src="/includes/top-menu.xhtml"/>
    </ui:define>

    <ui:define name="menu-end">
        <form class="navbar-form navbar-left" role="search">
            <div class="form-group">
                <input type="text" class="form-control" id="navbar-search-input"
                       placeholder="Search..." onclick="this.value = '';searchTopMenu('')" title="Filter menus by name"
                       onkeyup="searchTopMenu(this.value)">
                </input>
                <ul class="nav navbar-nav" role="menu">

                    <li class="dropdown" >
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true"/>

                        <ul class="dropdown-menu" role="menu">

                        </ul>
                    </li>     
                </ul>    
            </div>
        </form>

    </ui:define>

    <ui:define name="content-end">
        <section class="content">
            <ui:insert name="code"/>
        </section>
    </ui:define>

    <!-- below is just an example on how to define more tabs for control sidebar --> 
    <ui:define name="controlsidebar-tabs">
        <li><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
        <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
    </ui:define>

    <ui:define name="controlsidebar-content">
        <ui:include src="/includes/controlsidebar-tabs-content.xhtml"/>
    </ui:define>

    <ui:define name="footer">
        <a target="_blank"
           href="https://github.com/adminfaces">
            Copyright (C) 2017 - AdminFaces
        </a>
        <div class="pull-right hidden-xs" style="color: gray">
            <i>#{adm['admin.version']}</i>
        </div>

        <script type="text/javascript">
            if (isMobile()) {
                $('a.ui-link').click(function () {
                    $(this).prop('disabled', true);
                    showBar();
                });
            }

            function searchTopMenu(criteria) {
                //<![CDATA[
                
                $('.navbar-form li.dropdown').addClass('open');
                var menuResults = $('.navbar-form ul.dropdown-menu[role="menu"]');
                if (criteria != null && criteria.length >= 2) {
                    criteria = criteria.toLowerCase();
                    
                     $('ul.nav.navbar-nav ul.dropdown-menu[role="menu"] > li').each(function () {
                         var linkText = $(this).find('a span');
                         if(linkText && linkText.html().toLowerCase().indexOf(criteria) !== -1) {
                              console.log($(this).html());
                               menuResults.append("<li>").append($(this)).append("</li>");
                         }
                     });

                }
                
                //]]>
            }
        </script>
    </ui:define>

    <ui:define name="after-wrapper">
        <h:outputScript library="js" name="prism.js"  target="head"/>
    </ui:define>

</ui:composition>